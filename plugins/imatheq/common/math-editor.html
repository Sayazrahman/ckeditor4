<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Math Formula Editor</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- MathLive -->
<script src="https://cdn.jsdelivr.net/npm/mathlive/dist/mathlive.min.js"></script>
<link rel="stylesheet" href="./css/imatheq_modal.css" />
<!-- MathJax -->
<script>
window.MathJax = {
  tex: {
    inlineMath: [["\\(", "\\)"], ["$", "$"]],
    displayMath: [["\\[", "\\]"], ["$$", "$$"]],
    packages: ["base", "ams", "noerrors", "noundefined", "autoload", "cancel", "boldsymbol"],
    macros: {
      mathbb: ['{\\mathbb{#1}}', 1],
      mathcal: ['{\\mathcal{#1}}', 1],
      mathfrak: ['{\\mathfrak{#1}}', 1]
    }
  },
  svg: { 
    fontCache: "global",
    displayAlign: "left",
    displayIndent: "0"
  },
  chtml: {
    fontURL: 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2'
  },
  startup: {
    ready: () => {
      MathJax.startup.defaultReady();
    }
  }
};
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-svg-full.js" async></script>
<script src="./math-editor-core.js" async></script>


</head>
<style>
  * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }

  body {
    font-family: Arial, sans-serif;
    background: white;
    padding: 0;
    margin: 0;
    height: 100vh;
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }

  .header {
    background: #6b4c7a;
    color: white;
    padding: 15px 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-shrink: 0;
  }

  .header h2 {
    margin: 0;
    font-size: 18px;
  }

  .font-controls {
    display: flex;
    gap: 10px;
    align-items: center;
  }

  .font-controls label {
    font-size: 13px;
    margin-right: 5px;
  }

  .font-controls select {
    padding: 5px 10px;
    border: 1px solid #ddd;
    border-radius: 4px;
    font-size: 13px;
    background: white;
  }

  .symbol-toolbar {
    background: #e8e8e8;
    border-bottom: 1px solid #ccc;
    padding: 8px 10px;
    display: flex;
    align-items: center;
    gap: 5px;
    flex-shrink: 0;
    overflow-x: auto;
  }

  .toolbar-btn {
    min-width: 38px;
    height: 34px;
    border: 1px solid #aaa;
    background: white;
    cursor: pointer;
    font-size: 16px;
    border-radius: 3px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.1s;
    padding: 4px 6px;
    flex-shrink: 0;
  }

  .toolbar-btn:hover {
    background: #e3f2fd;
    border-color: #2196F3;
  }

  .toolbar-btn.active {
    background: #bbdefb;
    border-color: #2196F3;
  }

  .symbol-palette {
    background: white;
    border-bottom: 1px solid #ddd;
      padding: 8px 4px;
    display: flex;
    flex-wrap: wrap;
    gap: 2px 2px;
    row-gap: 5px;
    height: auto;
    overflow-y: auto;
    flex-shrink: 0;
    line-height: 1;
  }

  .symbol-palette.hidden {
    display: none;
  }

  .symbol-btn {
    min-width: 40px;
    height: 32px;
    border: 1px solid #bbb;
    background: white;
    cursor: pointer;
    font-size: 15px;
    border-radius: 2px;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0px 4px;
    transition: all 0.1s;
    flex-shrink: 0;
    margin: 0;
    line-height: 1;
    position: relative;
    overflow: hidden;
  }

  .symbol-btn svg {
    max-width: 100%;
    max-height: 24px;
    display: block;
  }

  .symbol-btn.svg-rendered {
    font-size: 0;
  }

  .symbol-btn:hover {
    background: #e3f2fd;
    border-color: #2196F3;
    transform: translateY(-1px);
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  }

  /* Fix for identity matrix button */
  .symbol-btn.matrix-identity {
    font-size: 10px;
    line-height: 1.1;
    padding: 2px;
    font-family: 'Courier New', monospace;
    white-space: pre;
  }

  .content {
    flex: 1;
    display: flex;
    flex-direction: column;
    padding: 15px;
    overflow: hidden;
    min-height: 0;
  }

  #mathlive-editor {
    width: 100%;
    flex: 1;
    min-height: 350px;
    font-size: 24px;
    border: 2px solid #ddd;
    border-radius: 6px;
    padding: 20px;
    background: white;
    margin-bottom: 15px;
    overflow: auto;
  }

  .footer {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    padding: 15px 20px;
    border-top: 1px solid #e9ecef;
    background: #f8f9fa;
    flex-shrink: 0;
  }

  .btn {
    padding: 10px 24px;
    border: none;
    border-radius: 4px;
    font-size: 14px;
    cursor: pointer;
    transition: opacity 0.2s;
  }

  .btn:hover {
    opacity: 0.9;
  }

  .btn-cancel {
    background: #6c757d;
    color: white;
  }

  .btn-save {
    background: #007bff;
    color: white;
  }
  .palette-separator {
  width: 100%;
  height: 2px;
  background: #ccc;
  margin: 8px 0;
  flex-basis: 100%;
}

.palette-group {
  display: contents;
}
.operator-group {
  display: inline-flex;
  flex-wrap: wrap;
  gap: 2px;
  margin-right: 10px;
  padding-right: 10px;
  border-right: 2px solid #999;
  align-items: flex-start;
  vertical-align: top;
  max-width: fit-content;
}

.operator-group:last-child {
  border-right: none;
  margin-right: 0;
  padding-right: 0;
}

/* Make groups wrap after 3 items for consistency */
.operator-group .symbol-btn {
  flex: 0 0 auto;
}

.symbol-palette {
 
  overflow: auto ;
  background: white;
  border-bottom: 1px solid #ddd;
  padding: 8px 4px;
  display: flex;
  flex-wrap: wrap;
  gap: 0;
  row-gap: 5px;
  height: 150px;
  overflow-y: auto;
  flex-shrink: 0;
  line-height: 1;
  align-items: flex-start;
}
/* Matrix Dialog Styles */
.matrix-dialog {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10000;
}

.matrix-dialog-content {
  background: white;
  border-radius: 8px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
  width: 500px;
  max-width: 90%;
}

.matrix-dialog-header {
  background: #6b4c7a;
  color: white;
  padding: 15px 20px;
  border-radius: 8px 8px 0 0;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.matrix-dialog-header h3 {
  margin: 0;
  font-size: 18px;
}

.matrix-dialog-close {
  background: none;
  border: none;
  color: white;
  font-size: 28px;
  cursor: pointer;
  padding: 0;
  width: 30px;
  height: 30px;
  line-height: 1;
}

.matrix-dialog-close:hover {
  opacity: 0.8;
}

.matrix-dialog-body {
  padding: 20px;
}

.matrix-grid-selector {
  margin-bottom: 20px;
}

.matrix-size-grid {
  display: grid;
  grid-template-columns: repeat(10, 20px);
  grid-template-rows: repeat(10, 20px);
  gap: 2px;
  background: #e0e0e0;
  padding: 4px;
  border: 2px solid #999;
  margin-bottom: 10px;
  cursor: pointer;
  width: fit-content;
}

.matrix-grid-cell {
  background: white;
  transition: background 0.1s;
}

.matrix-grid-cell:hover,
.matrix-grid-cell.selected {
  background: #4CAF50;
}

.matrix-size-display {
  text-align: center;
  font-weight: bold;
  font-size: 16px;
  padding: 8px;
  background: #f5f5f5;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.matrix-type-selector {
  margin-bottom: 20px;
}

.matrix-type-selector label {
  display: block;
  font-weight: bold;
  margin-bottom: 10px;
  color: #333;
}

.matrix-type-buttons {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.matrix-type-btn {
  padding: 8px 16px;
  border: 2px solid #ddd;
  background: white;
  border-radius: 4px;
  cursor: pointer;
  font-size: 14px;
  transition: all 0.2s;
}

.matrix-type-btn:hover {
  border-color: #6b4c7a;
  background: #f5f5f5;
}

.matrix-type-btn.active {
  border-color: #6b4c7a;
  background: #6b4c7a;
  color: white;
}

.matrix-manual-input {
  display: flex;
  gap: 20px;
}

.matrix-manual-input label {
  display: flex;
  align-items: center;
  gap: 8px;
  font-weight: bold;
  color: #333;
}

.matrix-manual-input input {
  width: 60px;
  padding: 6px 10px;
  border: 1px solid #ddd;
  border-radius: 4px;
  font-size: 14px;
}

.matrix-dialog-footer {
  padding: 15px 20px;
  border-top: 1px solid #e0e0e0;
  display: flex;
  justify-content: flex-end;
  gap: 10px;
}

.btn-primary {
  background: #007bff;
  color: white;
}

.matrix-builder-btn {
  min-width: 50px;
  height: 50px;
  line-height: 1.2;
}

  /* Icon styles for better tab icons */
  .icon-general::before { content: "â‰ˆ"; font-size: 20px; }
  .icon-operators::before { content: "Ã—Ã·"; font-size: 18px; }
  .icon-scripts::before { content: "xâ¿"; font-size: 16px; }
  .icon-arrows::before { content: "â‡„"; font-size: 18px; }
  .icon-relations::before { content: "â‰¤"; font-size: 18px; }
  .icon-greek::before { content: "Î±Î²"; font-size: 16px; }
  .icon-matrices::before { content: "â¡â¤"; font-size: 18px; }
  .icon-brackets::before { content: "()"; font-size: 18px; }
  .icon-calculus::before { content: "âˆ«âˆ‘"; font-size: 16px; }
  .icon-functions::before { content: "Æ’(x)"; font-size: 14px; }
  .icon-functions2::before { content: "sinh"; font-size: 12px; }
  .icon-misc::before { content: "âˆ%"; font-size: 16px; }
</style>
<body>

<div class="header">
  <h2>Insert Mathematical Formula</h2>
  <div class="font-controls">
    <label for="font-family">Font:</label>
    <select id="font-family">
      <option value="Latin Modern Math">Latin Modern Math</option>
      <option value="STIX Two Math">STIX Two Math</option>
      <option value="Cambria Math">Cambria Math</option>
      <option value="Asana Math">Asana Math</option>
      <option value="TeX Gyre Termes Math">TeX Gyre Termes</option>
    </select>
    <label for="font-size">Size:</label>
    <select id="font-size">
      <option value="16">16px</option>
      <option value="18">18px</option>
      <option value="20">20px</option>
      <option value="24" selected>24px</option>
      <option value="28">28px</option>
      <option value="32">32px</option>
      <option value="36">36px</option>
    </select>
  </div>
</div>

<!-- Symbol Category Toolbar -->
<div class="symbol-toolbar">
  <button class="toolbar-btn active icon-general" onclick="showPalette('general')" title="General Symbols"></button>
  <button class="toolbar-btn icon-operators" onclick="showPalette('operators')" title="Operators"></button>
  <button class="toolbar-btn icon-scripts" onclick="showPalette('scripts')" title="Subscript/Superscript"></button>
  <button class="toolbar-btn icon-arrows" onclick="showPalette('arrows')" title="Arrows"></button>
  <button class="toolbar-btn icon-relations" onclick="showPalette('relations')" title="Relations"></button>
  <button class="toolbar-btn icon-greek" onclick="showPalette('greek')" title="Greek"></button>
  <button class="toolbar-btn icon-matrices" onclick="showPalette('matrices')" title="Matrices"></button>
  <button class="toolbar-btn icon-brackets" onclick="showPalette('brackets')" title="Brackets"></button>
  <button class="toolbar-btn icon-calculus" onclick="showPalette('calculus')" title="Calculus"></button>
  <button class="toolbar-btn icon-functions" onclick="showPalette('functions')" title="Functions"></button>
  <button class="toolbar-btn icon-functions2" onclick="showPalette('functions2')" title="More Functions"></button>
  <button class="toolbar-btn icon-misc" onclick="showPalette('misc')" title="Misc"></button>
</div>

<div id="palette-general" class="symbol-palette">
  <!-- Row 1, Group 1: Fractions -->
  <div class="operator-group">
    <button class="symbol-btn" data-latex="\frac{#?}{#?}">a/b</button>
<button class="symbol-btn" data-latex="\frac{d}{dx}#?">d/dx</button>
     <button class="symbol-btn" data-latex="\partial">âˆ‚</button> 
  </div>
  
  <!-- Row 1, Group 2: Roots (4 items - ADDED 4th root) -->
  <div class="operator-group">
    <button class="symbol-btn" data-latex="\sqrt{#?}">âˆšâ¬š</button>
    <button class="symbol-btn" data-latex="\sqrt[#@]{#?}">â¿âˆšâ¬š</button>
    <button class="symbol-btn" data-latex="\sqrt[3]{#?}">Â³âˆšâ¬š</button>
    <button class="symbol-btn" data-latex="\sqrt[4]{#?}">â´âˆšâ¬š</button>
  </div>
  
  <!-- Row 1, Group 3: Brackets -->
  <div class="operator-group">
    <button class="symbol-btn" data-latex="\left(#?\right)">(â¬š)</button>
    <button class="symbol-btn" data-latex="\left[#?\right]">[â¬š]</button>
  <button class="symbol-btn" data-latex="\left\langle#?\right\rangle">âŸ¨â¬šâŸ©</button>
    <button class="symbol-btn" data-latex="\left\{#?\right\}">{â¬š}</button>
    <button class="symbol-btn" data-latex="\left\lfloor#?\right\rfloor">âŒŠâ¬šâŒ‹</button>
    <button class="symbol-btn" data-latex="\left\lceil#?\right\rceil">âŒˆâ¬šâŒ‰</button>
    <button class="symbol-btn" data-latex="?">?</button>
  </div>
  
  <!-- Row 1, Group 4: Basic Operations -->
  <div class="operator-group">
    <button class="symbol-btn" data-latex="+">+</button>
    <button class="symbol-btn" data-latex="-">âˆ’</button>
  </div>
  
  <!-- Row 1, Group 5: Comparisons -->
  <div class="operator-group">
    <button class="symbol-btn" data-latex="\geq">â‰¥</button>
    <button class="symbol-btn" data-latex="\leq">â‰¤</button>
  </div>
  
  <!-- Row 1, Group 6: Set Operations -->
  <div class="operator-group">
    <button class="symbol-btn" data-latex="\in">âˆˆ</button>
    <button class="symbol-btn" data-latex="\subset">âŠ‚</button>
    <button class="symbol-btn" data-latex="\cup">âˆª</button>
    <button class="symbol-btn" data-latex="\cap">âˆ©</button>
  </div>
  
  <!-- Row 2, Group 1: Greek Letters -->
  <div class="operator-group">
    <button class="symbol-btn" data-latex="\pi">Ï€</button>
    <button class="symbol-btn" data-latex="\alpha">Î±</button>
  </div>
  
  <!-- Row 2, Group 2: NEW - Shapes with double vertical bars -->
  <div class="operator-group">
    <button class="symbol-btn" data-latex="\square">â–¡</button>
<button class="symbol-btn" data-latex="\cancel{#?}">â§„</button>
    <button class="symbol-btn" data-latex="\parallel">â€–</button>
    <button class="symbol-btn" data-latex="\nparallel">âˆ¦</button>
  </div>
  
  <!-- Row 2, Group 3: Division/Cancellation -->
  <div class="operator-group">
<button class="symbol-btn" data-latex="/#?">â§¸â¬š</button>
    <button class="symbol-btn" data-latex="/">/</button>
  </div>
  
  <!-- Row 2, Group 4: Norms and absolute values -->
  <div class="operator-group">
    <button class="symbol-btn" data-latex="\left\Vert#?\right\Vert">â€–â¬šâ€–</button>
    <button class="symbol-btn" data-latex="\left|#?\right|">|â¬š|</button>
    <button class="symbol-btn" data-latex="\bigcirc">â—¯</button>
    <button class="symbol-btn" data-latex="\oslash">âŠ˜</button>
  </div>
  
  <!-- Row 2, Group 5: Multiplication -->
  <div class="operator-group">
    <button class="symbol-btn" data-latex="\times">Ã—</button>
    <button class="symbol-btn" data-latex="\div">Ã·</button>
    <button class="symbol-btn" data-latex="\pm">Â±</button>
    <button class="symbol-btn" data-latex="!">!</button>
  </div>
  
  <!-- Row 3, Group 1: More Greek -->
  <div class="operator-group">
    <button class="symbol-btn" data-latex="\infty">âˆ</button>
    <button class="symbol-btn" data-latex="\beta">Î²</button>
    <button class="symbol-btn" data-latex="\emptyset">âˆ…</button>
    <button class="symbol-btn" data-latex="\theta">Î¸</button>
  </div>
  
  <!-- Row 3, Group 2: Equality -->
  <div class="operator-group">
    <button class="symbol-btn" data-latex="=">=</button>
    <button class="symbol-btn" data-latex="\neq">â‰ </button>
    <button class="symbol-btn" data-latex="\equiv">â‰¡</button>
    <button class="symbol-btn" data-latex=">">></button>
    <button class="symbol-btn" data-latex="<"><</button>
  </div>
  
  <!-- Row 3, Group 3: Backslash -->
  <div class="operator-group">
    <button class="symbol-btn" data-latex="\backslash">\</button>
  </div>
  
  <!-- Row 3, Group 4: Calculus -->
  <div class="operator-group">
    <button class="symbol-btn" data-latex="\nabla">âˆ‡</button>
    <button class="symbol-btn" data-latex="\partial">âˆ‚</button>
  </div>
  
  <!-- Row 4, Group 1: Scripts -->
  <div class="operator-group">
   <button class="symbol-btn" data-latex="#@^{#?}">xâ¿</button>
<button class="symbol-btn" data-latex="#@_{#?}">xáµ¢</button>
<button class="symbol-btn" data-latex="#@^{#?}_{#?}">xâ¿áµ¢</button>
<button class="symbol-btn" data-latex="\degree">Â°</button>

  </div>
 
</div>
<div id="palette-operators" class="symbol-palette hidden">
  <!-- Row 1, Group 1: Basic arithmetic -->
  <div class="operator-group">
    <button class="symbol-btn" data-latex="+">+</button>
    <button class="symbol-btn" data-latex="-">âˆ’</button>
    <button class="symbol-btn" data-latex="\pm">Â±</button>
    <button class="symbol-btn" data-latex="\mp">âˆ“</button>
  </div>
  
  <!-- Row 1, Group 2: Circle operations -->
  <div class="operator-group">
    <button class="symbol-btn" data-latex="\oplus">âŠ•</button>
    <button class="symbol-btn" data-latex="\ominus">âŠ–</button>
  </div>
  
  <!-- Row 1, Group 3: Set operations -->
  <div class="operator-group">
    <button class="symbol-btn" data-latex="\cup">âˆª</button>
    <button class="symbol-btn" data-latex="\cap">âˆ©</button>
    <button class="symbol-btn" data-latex="\neg">Â¬</button>
  </div>
  
  <!-- Row 1, Group 4: Special symbols -->
  <div class="operator-group">
    <button class="symbol-btn" data-latex="\pi">Ï€</button>
    <button class="symbol-btn" data-latex="\infty">âˆ</button>
    <button class="symbol-btn" data-latex="!">!</button>
  </div>
  
  <!-- Row 1, Group 5: Angles -->
  <div class="operator-group">
    <button class="symbol-btn" data-latex="\angle">âˆ </button>
    <button class="symbol-btn" data-latex="\measuredangle">âˆ¡</button>
    <button class="symbol-btn" data-latex="\triangleleft">â—</button>
  </div>
  
  <!-- Row 2, Group 1: Multiplication/division -->
  <div class="operator-group">
    <button class="symbol-btn" data-latex="\times">Ã—</button>
    <button class="symbol-btn" data-latex="\cdot">Â·</button>
 <button class="symbol-btn" data-latex="\degree">Â°</button>
    <button class="symbol-btn" data-latex="*">âˆ—</button>
  </div>
  
  <!-- Row 2, Group 2: More circle ops -->
  <div class="operator-group">
    <button class="symbol-btn" data-latex="\otimes">âŠ—</button>
    <button class="symbol-btn" data-latex="\odot">âŠ™</button>
  </div>
  
  <!-- Row 2, Group 3: Logic -->
  <div class="operator-group">
    <button class="symbol-btn" data-latex="\vee">âˆ¨</button>
    <button class="symbol-btn" data-latex="\wedge">âˆ§</button>
    <button class="symbol-btn" data-latex="\forall">âˆ€</button>
  </div>
  
  <!-- Row 2, Group 4: Triangles -->
  <div class="operator-group">
    <button class="symbol-btn" data-latex="\triangle">â–³</button>
    <button class="symbol-btn" data-latex="\nabla">âˆ‡</button>
    <button class="symbol-btn" data-latex="\triangledown">â–½</button>
  </div>
  
  <!-- Row 2, Group 5: (empty in reference, or add symbols) -->
  <div class="operator-group">
    <button class="symbol-btn" data-latex="\partial">âˆ‚</button>
  </div>
  
  <!-- Row 3, Group 1: Division and misc -->
  <div class="operator-group">
    <button class="symbol-btn" data-latex="\bullet">â€¢</button>
    <button class="symbol-btn" data-latex="\div">Ã·</button>
    <button class="symbol-btn" data-latex="/">/</button>
    <button class="symbol-btn" data-latex="\%">%</button>
  </div>
  
  <!-- Row 3, Group 2: Slash operations -->
  <div class="operator-group">
    <button class="symbol-btn" data-latex="\oslash">âŠ˜</button>
    <button class="symbol-btn" data-latex="\diamond">â‹„</button>
  </div>
  
  <!-- Row 3, Group 3: Existence -->
  <div class="operator-group">
    <button class="symbol-btn" data-latex="\exists">âˆƒ</button>
    <button class="symbol-btn" data-latex="\nexists">âˆ„</button>
  </div>
  
  <!-- Row 3, Group 4: Empty/special -->
  <div class="operator-group">
  <button class="symbol-btn" data-latex="\emptyset">âˆ…</button>
<button class="symbol-btn" data-latex="'">â€²</button>
<button class="symbol-btn" data-latex="''">â€³</button>
  </div>
  
  <!-- Row 3, Group 5: Complement -->
  <div class="operator-group">
    <button class="symbol-btn" data-latex="\complement">âˆ</button>
  </div>
  
  
  <!-- Row 3, Group 7: Dots -->
  <div class="operator-group">
    <button class="symbol-btn" data-latex="\cdots">â‹¯</button>
    <button class="symbol-btn" data-latex="\vdots">â‹®</button>
    <button class="symbol-btn" data-latex="\ddots">â‹±</button>
  </div>
  
  <!-- Row 3, Group 8: Permille -->
  <div class="operator-group">
    <button class="symbol-btn" data-latex="\text{â€°}">â€°</button>
  </div>
</div>
<div id="palette-scripts" class="symbol-palette hidden">
 <button class="symbol-btn" data-latex="#@^{#?}">xâ¿</button>
<button class="symbol-btn" data-latex="#@_{#?}">xâ‚™</button>
<button class="symbol-btn" data-latex="#@^{#?}_{#?}">xâ¿â‚˜</button>
</div>

<div id="palette-functions" class="symbol-palette hidden">
  <button class="symbol-btn" data-latex="\ln">lnâ¬š</button>
  <button class="symbol-btn" data-latex="\log">logâ¬š</button>
  <button class="symbol-btn" data-latex="\log_{e}">logâ‚‘â¬š</button> 
  <button class="symbol-btn" data-latex="\log_{10}">logâ‚â‚€â¬š</button>
  <button class="symbol-btn" data-latex="\sin">sinâ¬š</button>
  <button class="symbol-btn" data-latex="\tan">tanâ¬š</button>
  <button class="symbol-btn" data-latex="\sec">secâ¬š</button>
  <button class="symbol-btn" data-latex="\sin^{-1}">sinâ»Â¹â¬š</button>
  <button class="symbol-btn" data-latex="\tan^{-1}">tanâ»Â¹â¬š</button>
  <button class="symbol-btn" data-latex="\sec^{-1}">secâ»Â¹â¬š</button>
  <button class="symbol-btn" data-latex="\arcsin">arcsinâ¬š</button>
  <button class="symbol-btn" data-latex="\arctan">arctanâ¬š</button>
  <button class="symbol-btn" data-latex="\arcsec">arcsecâ¬š</button>
  <button class="symbol-btn" data-latex="\exp">expâ¬š</button>
  <button class="symbol-btn" data-latex="\cos">cosâ¬š</button>
  <button class="symbol-btn" data-latex="\cot">cotâ¬š</button>
  <button class="symbol-btn" data-latex="\csc">cscâ¬š</button>
  <button class="symbol-btn" data-latex="\cos^{-1}">cosâ»Â¹â¬š</button>
  <button class="symbol-btn" data-latex="\cot^{-1}">cotâ»Â¹â¬š</button>
  <button class="symbol-btn" data-latex="\csc^{-1}">cscâ»Â¹â¬š</button>
  <button class="symbol-btn" data-latex="\arccos">arccosâ¬š</button>
  <button class="symbol-btn" data-latex="\arccot">arccotâ¬š</button>
  <button class="symbol-btn" data-latex="\arccsc">arccscâ¬š</button>
</div>

<div id="palette-functions2" class="symbol-palette hidden">
  <button class="symbol-btn" data-latex="\sinh">sinhâ¬š</button>
  <button class="symbol-btn" data-latex="\cosh">coshâ¬š</button>
  <button class="symbol-btn" data-latex="\tanh">tanhâ¬š</button>
  <button class="symbol-btn" data-latex="\coth">cothâ¬š</button>
  <button class="symbol-btn" data-latex="\operatorname{sech}">sechâ¬š</button>
  <button class="symbol-btn" data-latex="\operatorname{csch}">cschâ¬š</button>
  <button class="symbol-btn" data-latex="\sinh^{-1}">sinhâ»Â¹â¬š</button>
  <button class="symbol-btn" data-latex="\cosh^{-1}">coshâ»Â¹â¬š</button>
  <button class="symbol-btn" data-latex="\tanh^{-1}">tanhâ»Â¹â¬š</button>
  <button class="symbol-btn" data-latex="\coth^{-1}">cothâ»Â¹â¬š</button>
  <button class="symbol-btn" data-latex="\operatorname{sech}^{-1}">sechâ»Â¹â¬š</button>
  <button class="symbol-btn" data-latex="\operatorname{csch}^{-1}">cschâ»Â¹â¬š</button>
  <button class="symbol-btn" data-latex="\operatorname{arcsinh}">arcsinhâ¬š</button>
  <button class="symbol-btn" data-latex="\operatorname{arccosh}">arccoshâ¬š</button>
  <button class="symbol-btn" data-latex="\operatorname{arctanh}">arctanhâ¬š</button>
  <button class="symbol-btn" data-latex="\operatorname{arcsech}">arcsechâ¬š</button>
  <button class="symbol-btn" data-latex="\operatorname{arccsch}">arccschâ¬š</button>
  <button class="symbol-btn" data-latex="\operatorname{arccoth}">arccothâ¬š</button>
  <button class="symbol-btn" data-latex="\log_2">logâ‚‚â¬š</button>
</div>

<div id="palette-arrows" class="symbol-palette hidden">
  <button class="symbol-btn" data-latex="\uparrow">â†‘</button>
  <button class="symbol-btn" data-latex="\downarrow">â†“</button>
  <button class="symbol-btn" data-latex="\updownarrow">â†•</button>
  <button class="symbol-btn" data-latex="\leftarrow">â†</button>
  <button class="symbol-btn" data-latex="\rightarrow">â†’</button>
  <button class="symbol-btn" data-latex="\leftrightarrow">â†”</button>
  <button class="symbol-btn" data-latex="\Leftarrow">â‡</button>
  <button class="symbol-btn" data-latex="\Rightarrow">â‡’</button>
  <button class="symbol-btn" data-latex="\Leftrightarrow">â‡”</button>
  <button class="symbol-btn" data-latex="\nwarrow">â†–</button>
  <button class="symbol-btn" data-latex="\nearrow">â†—</button>
  <button class="symbol-btn" data-latex="\searrow">â†˜</button>
  <button class="symbol-btn" data-latex="\swarrow">â†™</button>
  <button class="symbol-btn" data-latex="\Uparrow">â‡‘</button>
  <button class="symbol-btn" data-latex="\Downarrow">â‡“</button>
  <button class="symbol-btn" data-latex="\Updownarrow">â‡•</button>
  <button class="symbol-btn" data-latex="\mapsto">â†¦</button>
  <button class="symbol-btn" data-latex="\hookleftarrow">â†©</button>
  <button class="symbol-btn" data-latex="\hookrightarrow">â†ª</button>
  <button class="symbol-btn" data-latex="\leftleftarrows">â‡‡</button>
  <button class="symbol-btn" data-latex="\rightrightarrows">â‡‰</button>
  <button class="symbol-btn" data-latex="\leftrightarrows">â‡†</button>
  <button class="symbol-btn" data-latex="\rightleftarrows">â‡„</button>
  <button class="symbol-btn" data-latex="\upuparrows">â‡ˆ</button>
  <button class="symbol-btn" data-latex="\downdownarrows">â‡Š</button>
  <button class="symbol-btn" data-latex="\leftharpoonup">â†¼</button>
  <button class="symbol-btn" data-latex="\rightharpoonup">â‡€</button>
  <button class="symbol-btn" data-latex="\leftharpoondown">â†½</button>
  <button class="symbol-btn" data-latex="\rightharpoondown">â‡</button>
  <button class="symbol-btn" data-latex="\leftrightharpoons">â‡‹</button>
  <button class="symbol-btn" data-latex="\rightleftharpoons">â‡Œ</button>
  <button class="symbol-btn" data-latex="\dashleftarrow">â‡ </button>
  <button class="symbol-btn" data-latex="\dashrightarrow">â‡¢</button>
  <button class="symbol-btn" data-latex="\curvearrowleft">â†¶</button>
  <button class="symbol-btn" data-latex="\curvearrowright">â†·</button>
  <button class="symbol-btn" data-latex="\circlearrowleft">â†º</button>
  <button class="symbol-btn" data-latex="\circlearrowright">â†»</button>
  <button class="symbol-btn" data-latex="\Lsh">â†°</button>
  <button class="symbol-btn" data-latex="\Rsh">â†±</button>
  <button class="symbol-btn" data-latex="\looparrowleft">â†«</button>
  <button class="symbol-btn" data-latex="\looparrowright">â†¬</button>
  <button class="symbol-btn" data-latex="\leadsto">â‡</button>
  <button class="symbol-btn" data-latex="\longmapsto">âŸ¼</button>
  <button class="symbol-btn" data-latex="\longleftarrow">âŸµ</button>
  <button class="symbol-btn" data-latex="\longrightarrow">âŸ¶</button>
  <button class="symbol-btn" data-latex="\longleftrightarrow">âŸ·</button>
  <button class="symbol-btn" data-latex="\Longleftarrow">âŸ¸</button>
  <button class="symbol-btn" data-latex="\Longrightarrow">âŸ¹</button>
  <button class="symbol-btn" data-latex="\Longleftrightarrow">âŸº</button>
  <button class="symbol-btn" data-latex="\rightsquigarrow">â‡</button>
  <button class="symbol-btn" data-latex="\leftarrowtail">â†¢</button>
  <button class="symbol-btn" data-latex="\rightarrowtail">â†£</button>
  <button class="symbol-btn" data-latex="\twoheadleftarrow">â†</button>
  <button class="symbol-btn" data-latex="\twoheadrightarrow">â† </button>

<button class="symbol-btn" data-latex="\uparrow\downarrow">â‡…</button>
<button class="symbol-btn" data-latex="\downarrow\uparrow">â‡µ</button>
  <button class="symbol-btn" data-latex="\mapsfrom">â†¤</button>
  <button class="symbol-btn" data-latex="\mapsup">â†¥</button>
  <button class="symbol-btn" data-latex="\mapsdown">â†§</button>
  <button class="symbol-btn" data-latex="\circlearrowleft">âŸ²</button>
  <button class="symbol-btn" data-latex="\circlearrowright">âŸ³</button>
  <button class="symbol-btn" data-latex="\nwarrow">â¤´</button>
  <button class="symbol-btn" data-latex="\swarrow">â¤µ</button>
  <button class="symbol-btn" data-latex="\leftrightsquigarrow">â‡œ</button>
  <button class="symbol-btn" data-latex="\twoheadrightarrow">â‡›</button>
  <button class="symbol-btn" data-latex="\twoheadleftarrow">â‡š</button>
</div>

<div id="palette-relations" class="symbol-palette hidden">
  <button class="symbol-btn" data-latex="=">=</button>
  <button class="symbol-btn" data-latex="\equiv">â‰¡</button>
  <button class="symbol-btn" data-latex="\neq">â‰ </button>
  <button class="symbol-btn" data-latex="\not\equiv">â‰¢</button>
  <button class="symbol-btn" data-latex=">">></button>
  <button class="symbol-btn" data-latex="<"><</button>
  <button class="symbol-btn" data-latex="\geq">â‰¥</button>
  <button class="symbol-btn" data-latex="\leq">â‰¤</button>
  <button class="symbol-btn" data-latex="\gg">â‰«</button>
  <button class="symbol-btn" data-latex="\ll">â‰ª</button>
  <button class="symbol-btn" data-latex="\sim">âˆ¼</button>
  <button class="symbol-btn" data-latex="\approx">â‰ˆ</button>
  <button class="symbol-btn" data-latex="\cong">â‰…</button>
  <button class="symbol-btn" data-latex="\propto">âˆ</button>
  <button class="symbol-btn" data-latex="\perp">âŠ¥</button>
  <button class="symbol-btn" data-latex="\parallel">âˆ¥</button>
  <button class="symbol-btn" data-latex="\not<">â‰®</button>
  <button class="symbol-btn" data-latex="\not>">â‰¯</button>
  <button class="symbol-btn" data-latex="\not\leq">â‰°</button>
  <button class="symbol-btn" data-latex="\not\geq">â‰±</button>
  <button class="symbol-btn" data-latex="\prec">â‰º</button>
  <button class="symbol-btn" data-latex="\succ">â‰»</button>
  <button class="symbol-btn" data-latex="\preceq">âª¯</button>
  <button class="symbol-btn" data-latex="\succeq">âª°</button>
  <button class="symbol-btn" data-latex="\preccurlyeq">â‰¼</button>
  <button class="symbol-btn" data-latex="\succcurlyeq">â‰½</button>
  <button class="symbol-btn" data-latex="\not\prec">âŠ€</button>
  <button class="symbol-btn" data-latex="\not\succ">âŠ</button>
  <button class="symbol-btn" data-latex="\simeq">â‰ƒ</button>
  <button class="symbol-btn" data-latex="\nsim">â‰</button>
  <button class="symbol-btn" data-latex="\eqsim">â‰‚</button>
  <button class="symbol-btn" data-latex="\thicksim">âˆ¼</button>
  <button class="symbol-btn" data-latex="\backsim">âˆ½</button>
  <button class="symbol-btn" data-latex="\thickapprox">â‰ˆ</button>
  <button class="symbol-btn" data-latex="\approxeq">â‰Š</button>
  <button class="symbol-btn" data-latex="\ncong">â‰‡</button>
  <button class="symbol-btn" data-latex="\doteq">â‰</button>
  <button class="symbol-btn" data-latex="\doteqdot">â‰‘</button>
  <button class="symbol-btn" data-latex="\fallingdotseq">â‰’</button>
  <button class="symbol-btn" data-latex="\risingdotseq">â‰“</button>
  <button class="symbol-btn" data-latex="\triangleq">â‰œ</button>
  <button class="symbol-btn" data-latex="\circeq">â‰—</button>
  <button class="symbol-btn" data-latex="\bumpeq">â‰</button>
  <button class="symbol-btn" data-latex="\Bumpeq">â‰</button>
  <button class="symbol-btn" data-latex="\lessdot">â‹–</button>
  <button class="symbol-btn" data-latex="\gtrdot">â‹—</button>
  <button class="symbol-btn" data-latex="\lesssim">â‰²</button>
  <button class="symbol-btn" data-latex="\gtrsim">â‰³</button>
  <button class="symbol-btn" data-latex="\lessapprox">âª…</button>
  <button class="symbol-btn" data-latex="\gtrapprox">âª†</button>
  <button class="symbol-btn" data-latex="\lessgtr">â‰¶</button>
  <button class="symbol-btn" data-latex="\gtrless">â‰·</button>
  <button class="symbol-btn" data-latex="\lesseqgtr">â‹š</button>
  <button class="symbol-btn" data-latex="\gtreqless">â‹›</button>
  <button class="symbol-btn" data-latex="\eqslantless">âª•</button>
  <button class="symbol-btn" data-latex="\eqslantgtr">âª–</button>
<button class="symbol-btn" data-latex="\not\ni">âˆŒ</button>
<button class="symbol-btn" data-latex="\not\subset">âŠ„</button>
<button class="symbol-btn" data-latex="\not\supset">âŠ…</button>
<button class="symbol-btn" data-latex="\not\subseteq">âŠˆ</button>
<button class="symbol-btn" data-latex="\not\supseteq">âŠ‰</button>
<button class="symbol-btn" data-latex="\#">#</button>
  <button class="symbol-btn" data-latex="\nsim">â‰</button>
  <button class="symbol-btn" data-latex="\not\simeq">â‰„</button>
  <button class="symbol-btn" data-latex="\napprox">â‰‰</button>
  <button class="symbol-btn" data-latex="\sqsubset">âŠ</button>
  <button class="symbol-btn" data-latex="\sqsupset">âŠ</button>
  <button class="symbol-btn" data-latex="\sqsubseteq">âŠ‘</button>
  <button class="symbol-btn" data-latex="\sqsupseteq">âŠ’</button>
  <button class="symbol-btn" data-latex="\lhd">âŠ²</button>
  <button class="symbol-btn" data-latex="\rhd">âŠ³</button>
  <button class="symbol-btn" data-latex="\unlhd">âŠ´</button>
  <button class="symbol-btn" data-latex="\unrhd">âŠµ</button>
  <button class="symbol-btn" data-latex="\ntriangleleft">â‹ª</button>
  <button class="symbol-btn" data-latex="\ntriangleright">â‹«</button>
  <button class="symbol-btn" data-latex="\ntrianglelefteq">â‹¬</button>
  <button class="symbol-btn" data-latex="\ntrianglerighteq">â‹­</button>
</div>

<div id="palette-greek" class="symbol-palette hidden">
  <button class="symbol-btn" data-latex="\alpha">Î±</button>
  <button class="symbol-btn" data-latex="\beta">Î²</button>
  <button class="symbol-btn" data-latex="\gamma">Î³</button>
  <button class="symbol-btn" data-latex="\delta">Î´</button>
  <button class="symbol-btn" data-latex="\epsilon">Îµ</button>
  <button class="symbol-btn" data-latex="\varepsilon">Ïµ</button>
  <button class="symbol-btn" data-latex="\zeta">Î¶</button>
  <button class="symbol-btn" data-latex="\eta">Î·</button>
  <button class="symbol-btn" data-latex="\theta">Î¸</button>
  <button class="symbol-btn" data-latex="\vartheta">Ï‘</button>
  <button class="symbol-btn" data-latex="\iota">Î¹</button>
  <button class="symbol-btn" data-latex="\kappa">Îº</button>
  <button class="symbol-btn" data-latex="\lambda">Î»</button>
  <button class="symbol-btn" data-latex="\mu">Î¼</button>
  <button class="symbol-btn" data-latex="\nu">Î½</button>
  <button class="symbol-btn" data-latex="\xi">Î¾</button>
  <button class="symbol-btn" data-latex="\pi">Ï€</button>
  <button class="symbol-btn" data-latex="\rho">Ï</button>
  <button class="symbol-btn" data-latex="\sigma">Ïƒ</button>
  <button class="symbol-btn" data-latex="\tau">Ï„</button>
  <button class="symbol-btn" data-latex="\upsilon">Ï…</button>
  <button class="symbol-btn" data-latex="\phi">Ï†</button>
  <button class="symbol-btn" data-latex="\varphi">Ï•</button>
  <button class="symbol-btn" data-latex="\chi">Ï‡</button>
  <button class="symbol-btn" data-latex="\psi">Ïˆ</button>
  <button class="symbol-btn" data-latex="\omega">Ï‰</button>
  <button class="symbol-btn" data-latex="\Gamma">Î“</button>
  <button class="symbol-btn" data-latex="\Delta">Î”</button>
  <button class="symbol-btn" data-latex="\Theta">Î˜</button>
  <button class="symbol-btn" data-latex="\Lambda">Î›</button>
  <button class="symbol-btn" data-latex="\Xi">Î</button>
  <button class="symbol-btn" data-latex="\Pi">Î </button>
  <button class="symbol-btn" data-latex="\Sigma">Î£</button>
  <button class="symbol-btn" data-latex="\Upsilon">Î¥</button>
  <button class="symbol-btn" data-latex="\Phi">Î¦</button>
  <button class="symbol-btn" data-latex="\Psi">Î¨</button>
  <button class="symbol-btn" data-latex="\Omega">Î©</button>
  <button class="symbol-btn" data-latex="\mathbb{A}">ğ”¸</button>
  <button class="symbol-btn" data-latex="\mathbb{B}">ğ”¹</button>
  <button class="symbol-btn" data-latex="\mathbb{C}">â„‚</button>
  <button class="symbol-btn" data-latex="\mathbb{D}">ğ”»</button>
  <button class="symbol-btn" data-latex="\mathbb{E}">ğ”¼</button>
  <button class="symbol-btn" data-latex="\mathbb{F}">ğ”½</button>
  <button class="symbol-btn" data-latex="\mathbb{G}">ğ”¾</button>
  <button class="symbol-btn" data-latex="\mathbb{H}">â„</button>
  <button class="symbol-btn" data-latex="\mathbb{I}">ğ•€</button>
  <button class="symbol-btn" data-latex="\mathbb{J}">ğ•</button>
  <button class="symbol-btn" data-latex="\mathbb{K}">ğ•‚</button>
  <button class="symbol-btn" data-latex="\mathbb{L}">ğ•ƒ</button>
  <button class="symbol-btn" data-latex="\mathbb{M}">ğ•„</button>
  <button class="symbol-btn" data-latex="\mathbb{N}">â„•</button>
  <button class="symbol-btn" data-latex="\mathbb{O}">ğ•†</button>
  <button class="symbol-btn" data-latex="\mathbb{P}">â„™</button>
  <button class="symbol-btn" data-latex="\mathbb{Q}">â„š</button>
  <button class="symbol-btn" data-latex="\mathbb{R}">â„</button>
  <button class="symbol-btn" data-latex="\mathbb{S}">ğ•Š</button>
  <button class="symbol-btn" data-latex="\mathbb{T}">ğ•‹</button>
  <button class="symbol-btn" data-latex="\mathbb{U}">ğ•Œ</button>
  <button class="symbol-btn" data-latex="\mathbb{V}">ğ•</button>
  <button class="symbol-btn" data-latex="\mathbb{W}">ğ•</button>
  <button class="symbol-btn" data-latex="\mathbb{X}">ğ•</button>
  <button class="symbol-btn" data-latex="\mathbb{Y}">ğ•</button>
  <button class="symbol-btn" data-latex="\mathbb{Z}">â„¤</button>
  <button class="symbol-btn" data-latex="\mathcal{A}">ğ’œ</button>
  <button class="symbol-btn" data-latex="\mathcal{B}">â„¬</button>
  <button class="symbol-btn" data-latex="\mathcal{C}">ğ’</button>
  <button class="symbol-btn" data-latex="\mathcal{D}">ğ’Ÿ</button>
  <button class="symbol-btn" data-latex="\mathcal{E}">â„°</button>
  <button class="symbol-btn" data-latex="\mathcal{F}">â„±</button>
  <button class="symbol-btn" data-latex="\mathcal{G}">ğ’¢</button>
  <button class="symbol-btn" data-latex="\mathcal{H}">â„‹</button>
  <button class="symbol-btn" data-latex="\mathcal{I}">â„</button>
  <button class="symbol-btn" data-latex="\mathcal{J}">ğ’¥</button>
  <button class="symbol-btn" data-latex="\mathcal{K}">ğ’¦</button>
  <button class="symbol-btn" data-latex="\mathcal{L}">â„’</button>
  <button class="symbol-btn" data-latex="\mathcal{M}">â„³</button>
  <button class="symbol-btn" data-latex="\mathcal{N}">ğ’©</button>
  <button class="symbol-btn" data-latex="\mathcal{O}">ğ’ª</button>
  <button class="symbol-btn" data-latex="\mathcal{P}">ğ’«</button>
  <button class="symbol-btn" data-latex="\mathcal{Q}">ğ’¬</button>
  <button class="symbol-btn" data-latex="\mathcal{R}">â„›</button>
  <button class="symbol-btn" data-latex="\mathcal{S}">ğ’®</button>
  <button class="symbol-btn" data-latex="\mathcal{T}">ğ’¯</button>
  <button class="symbol-btn" data-latex="\mathcal{U}">ğ’°</button>
  <button class="symbol-btn" data-latex="\mathcal{V}">ğ’±</button>
  <button class="symbol-btn" data-latex="\mathcal{W}">ğ’²</button>
  <button class="symbol-btn" data-latex="\mathcal{X}">ğ’³</button>
  <button class="symbol-btn" data-latex="\mathcal{Y}">ğ’´</button>
  <button class="symbol-btn" data-latex="\mathcal{Z}">ğ’µ</button>

  <!-- Fraktur/Gothic Letters -->
  <button class="symbol-btn" data-latex="\mathfrak{A}">ğ”„</button>
  <button class="symbol-btn" data-latex="\mathfrak{B}">ğ”…</button>
  <button class="symbol-btn" data-latex="\mathfrak{C}">â„­</button>
  <button class="symbol-btn" data-latex="\mathfrak{D}">ğ”‡</button>
  <button class="symbol-btn" data-latex="\mathfrak{E}">ğ”ˆ</button>
  <button class="symbol-btn" data-latex="\mathfrak{F}">ğ”‰</button>
  <button class="symbol-btn" data-latex="\mathfrak{G}">ğ”Š</button>
  <button class="symbol-btn" data-latex="\mathfrak{H}">â„Œ</button>
  <button class="symbol-btn" data-latex="\mathfrak{I}">â„‘</button>
  <button class="symbol-btn" data-latex="\mathfrak{J}">ğ”</button>
  <button class="symbol-btn" data-latex="\mathfrak{K}">ğ”</button>
  <button class="symbol-btn" data-latex="\mathfrak{L}">ğ”</button>
  <button class="symbol-btn" data-latex="\mathfrak{M}">ğ”</button>
  <button class="symbol-btn" data-latex="\mathfrak{N}">ğ”‘</button>
  <button class="symbol-btn" data-latex="\mathfrak{O}">ğ”’</button>
  <button class="symbol-btn" data-latex="\mathfrak{P}">ğ”“</button>
  <button class="symbol-btn" data-latex="\mathfrak{Q}">ğ””</button>
  <button class="symbol-btn" data-latex="\mathfrak{R}">â„œ</button>
  <button class="symbol-btn" data-latex="\mathfrak{S}">ğ”–</button>
  <button class="symbol-btn" data-latex="\mathfrak{T}">ğ”—</button>
  <button class="symbol-btn" data-latex="\mathfrak{U}">ğ”˜</button>
  <button class="symbol-btn" data-latex="\mathfrak{V}">ğ”™</button>
  <button class="symbol-btn" data-latex="\mathfrak{W}">ğ”š</button>
  <button class="symbol-btn" data-latex="\mathfrak{X}">ğ”›</button>
  <button class="symbol-btn" data-latex="\mathfrak{Y}">ğ”œ</button>
  <button class="symbol-btn" data-latex="\mathfrak{Z}">â„¨</button>
</div>

<div id="palette-matrices" class="symbol-palette hidden">
  <!-- Matrix Builder Button -->
  <div class="operator-group">
    <button class="symbol-btn matrix-builder-btn" onclick="openMatrixDialog()" title="Create Matrix">
      <span style="font-size: 18px;">â¬šâ¬š<br>â¬šâ¬š</span>
    </button>
  </div>
  
  <!-- Quick Access: Common Matrices -->
  <div class="operator-group">
    <button class="symbol-btn" data-latex="\begin{matrix}#?&#?\\#?&#?\end{matrix}" title="2Ã—2 Plain">2Ã—2</button>
    <button class="symbol-btn" data-latex="\begin{pmatrix}#?&#?\\#?&#?\end{pmatrix}" title="2Ã—2 Parentheses">(2Ã—2)</button>
    <button class="symbol-btn" data-latex="\begin{bmatrix}#?&#?\\#?&#?\end{bmatrix}" title="2Ã—2 Brackets">[2Ã—2]</button>
    <button class="symbol-btn" data-latex="\begin{Bmatrix}#?&#?\\#?&#?\end{bmatrix}" title="2Ã—2 Braces">{2Ã—2}</button>
  </div>
  
  <div class="operator-group">
    <button class="symbol-btn" data-latex="\begin{matrix}#?&#?&#?\\#?&#?&#?\\#?&#?&#?\end{matrix}" title="3Ã—3 Plain">3Ã—3</button>
    <button class="symbol-btn" data-latex="\begin{pmatrix}#?&#?&#?\\#?&#?&#?\\#?&#?&#?\end{pmatrix}" title="3Ã—3 Parentheses">(3Ã—3)</button>
    <button class="symbol-btn" data-latex="\begin{bmatrix}#?&#?&#?\\#?&#?&#?\\#?&#?&#?\end{bmatrix}" title="3Ã—3 Brackets">[3Ã—3]</button>
  </div>
  
  <!-- Identity Matrices -->
  <div class="operator-group">
    <button class="symbol-btn matrix-identity" data-latex="\begin{pmatrix}1&0\\0&1\end{pmatrix}" title="2Ã—2 Identity">Iâ‚‚</button>
    <button class="symbol-btn matrix-identity" data-latex="\begin{pmatrix}1&0&0\\0&1&0\\0&0&1\end{pmatrix}" title="3Ã—3 Identity">Iâ‚ƒ</button>
  </div>
  
  <!-- Dots and separators -->
  <div class="operator-group">
    <button class="symbol-btn" data-latex=":" title="colon">:</button>
    <button class="symbol-btn" data-latex="\vdots" title="Vertical dots">â‹®</button>
    <button class="symbol-btn" data-latex="\cdots" title="Horizontal dots">â‹¯</button>
    <button class="symbol-btn" data-latex="\ddots" title="Diagonal dots">â‹±</button>
    <button class="symbol-btn" data-latex="\iddots" title="Inverse diagonal">â‹°</button>
  </div>
</div>

<!-- Matrix Dialog (Modal) -->
<div id="matrixDialog" class="matrix-dialog" style="display: none;">
  <div class="matrix-dialog-content">
    <div class="matrix-dialog-header">
      <h3>Matrix</h3>
      <button class="matrix-dialog-close" onclick="closeMatrixDialog()">Ã—</button>
    </div>
    
    <div class="matrix-dialog-body">
      <div class="matrix-grid-selector">
        <div class="matrix-size-grid" id="matrixGridSelector">
          <!-- Grid cells will be generated by JS -->
        </div>
        <div class="matrix-size-display" id="matrixSizeDisplay">1Ã—1</div>
      </div>
      
      <div class="matrix-type-selector">
        <label>Matrix Type:</label>
        <div class="matrix-type-buttons">
          <button class="matrix-type-btn active" data-type="pmatrix" title="Parentheses">(  )</button>
          <button class="matrix-type-btn" data-type="bmatrix" title="Brackets">[  ]</button>
          <button class="matrix-type-btn" data-type="Bmatrix" title="Braces">{  }</button>
          <button class="matrix-type-btn" data-type="vmatrix" title="Determinant">|  |</button>
          <button class="matrix-type-btn" data-type="Vmatrix" title="Norm">â€– â€–</button>
          <button class="matrix-type-btn" data-type="matrix" title="Plain">Plain</button>
        </div>
      </div>
      
      <div class="matrix-manual-input">
        <label>
          Rows: <input type="number" id="matrixRows" min="1" max="10" value="2">
        </label>
        <label>
          Columns: <input type="number" id="matrixCols" min="1" max="10" value="2">
        </label>
      </div>
    </div>
    
    <div class="matrix-dialog-footer">
      <button class="btn btn-cancel" onclick="closeMatrixDialog()">Cancel</button>
      <button class="btn btn-primary" onclick="insertMatrixFromDialog()">OK</button>
    </div>
  </div>
</div>

<div id="palette-brackets" class="symbol-palette hidden">
  <!-- Row 1: Parentheses variants -->
  <button class="symbol-btn" data-latex="\left(#?\right)">(â¬š)</button>
  <button class="symbol-btn" data-latex="\left((#?)\right)">((â¬š))</button>
  <button class="symbol-btn" data-latex="\left(\left(#?\right)\right)">(())</button>
  <button class="symbol-btn" data-latex="\left[\left(#?\right)\right]">[(â¬š)]</button>
  <button class="symbol-btn" data-latex="\left(\left[#?\right]\right)">([â¬š])</button>
  <button class="symbol-btn" data-latex="\left\{\left(#?\right)\right\}">{(â¬š)}</button>
  <button class="symbol-btn" data-latex="\left(\left\{#?\right\}\right)">({â¬š})</button>
  <button class="symbol-btn" data-latex="\left|\left(#?\right)\right|">|(â¬š)|</button>
  <button class="symbol-btn" data-latex="\left(\left|#?\right|\right)">(|â¬š|)</button>
  <button class="symbol-btn" data-latex="\left\langle\left(#?\right)\right\rangle">âŸ¨(â¬š)âŸ©</button>
  <button class="symbol-btn" data-latex="\left(\left\langle#?\right\rangle\right)">(âŸ¨â¬šâŸ©)</button>
  
  <!-- Row 1 continued: Square brackets variants -->
  <button class="symbol-btn" data-latex="\left[#?\right]">[â¬š]</button>
  <button class="symbol-btn" data-latex="\left[[#?]\right]">[[â¬š]]</button>
  <button class="symbol-btn" data-latex="\left[\left[#?\right]\right]">[[ ]]</button>
  <button class="symbol-btn" data-latex="\left(\left[#?\right]\right)">([â¬š])</button>
  <button class="symbol-btn" data-latex="\left[\left(#?\right)\right]">[(â¬š)]</button>
  <button class="symbol-btn" data-latex="\left\{\left[#?\right]\right\}">{[â¬š]}</button>
  <button class="symbol-btn" data-latex="\left[\left\{#?\right\}\right]">[{â¬š}]</button>
  <button class="symbol-btn" data-latex="\left|\left[#?\right]\right|">|[â¬š]|</button>
  <button class="symbol-btn" data-latex="\left[\left|#?\right|\right]">[|â¬š|]</button>
  <button class="symbol-btn" data-latex="\llbracket#?\rrbracket">âŸ¦â¬šâŸ§</button>
  <button class="symbol-btn" data-latex="\left\langle\left[#?\right]\right\rangle">âŸ¨[â¬š]âŸ©</button>

  <!-- Row 2: Curly braces variants -->
  <button class="symbol-btn" data-latex="\left\{#?\right\}">{â¬š}</button>
  <button class="symbol-btn" data-latex="\left\{\left\{#?\right\}\right\}">{{ }}</button>
  <button class="symbol-btn" data-latex="\left(\left\{#?\right\}\right)">({â¬š})</button>
  <button class="symbol-btn" data-latex="\left\{\left(#?\right)\right\}">{(â¬š)}</button>
  <button class="symbol-btn" data-latex="\left[\left\{#?\right\}\right]">[{â¬š}]</button>
  <button class="symbol-btn" data-latex="\left\{\left[#?\right]\right\}">{[â¬š]}</button>
  <button class="symbol-btn" data-latex="\left|\left\{#?\right\}\right|">|{â¬š}|</button>
  <button class="symbol-btn" data-latex="\left\{\left|#?\right|\right\}">{|â¬š|}</button>
  <button class="symbol-btn" data-latex="\left\langle\left\{#?\right\}\right\rangle">âŸ¨{â¬š}âŸ©</button>
  <button class="symbol-btn" data-latex="\left\{\left\langle#?\right\rangle\right\}">{âŸ¨â¬šâŸ©}</button>

  <!-- Absolute value and norm variants -->
  <button class="symbol-btn" data-latex="\left|#?\right|">|â¬š|</button>
  <button class="symbol-btn" data-latex="\left||#?\right||">||â¬š||</button>
<button class="symbol-btn" data-latex="\left\Vert#?\right\Vert">â€–â¬šâ€–</button>
<button class="symbol-btn" data-latex="\left\Vert\left|#?\right|\right\Vert">â€–|â¬š|â€–</button>
<button class="symbol-btn" data-latex="\left|\left\Vert#?\right\Vert\right|">|â€–â¬šâ€–|</button>

  <!-- Angle brackets variants -->
  <button class="symbol-btn" data-latex="\langle#?\rangle">âŸ¨â¬šâŸ©</button>
  <button class="symbol-btn"  data-latex="\left\langle\left\langle#?\right\rangle\right\rangle">âŸªâ¬šâŸ«</button>
  <button class="symbol-btn" data-latex="\left\langle\left|#?\right|\right\rangle">âŸ¨|â¬š|âŸ©</button>
  <button class="symbol-btn" data-latex="\left|\left\langle#?\right\rangle\right|">|âŸ¨â¬šâŸ©|</button>

  <!-- Floor and ceiling -->
  <button class="symbol-btn" data-latex="\lfloor#?\rfloor">âŒŠâ¬šâŒ‹</button>
  <button class="symbol-btn" data-latex="\lceil#?\rceil">âŒˆâ¬šâŒ‰</button>
  <button class="symbol-btn" data-latex="\left\lfloor\left\lfloor#?\right\rfloor\right\rfloor">âŒŠâŒŠâ¬šâŒ‹âŒ‹</button>
  <button class="symbol-btn" data-latex="\left\lceil\left\lceil#?\right\rceil\right\rceil">âŒˆâŒˆâ¬šâŒ‰âŒ‰</button>

  <!-- Special brackets -->
  <button class="symbol-btn" data-latex="âŸ®#?âŸ¯">âŸ®â¬šâŸ¯</button>
  <button class="symbol-btn" data-latex="\{\!\!\{#?\}\!\!\}">â¦ƒâ¬šâ¦„</button>
  <button class="symbol-btn" data-latex="â¦…#?â¦†">â¦…â¬šâ¦†</button>
  <button class="symbol-btn" data-latex="â¦‡#?â¦ˆ">â¦‡â¬šâ¦ˆ</button>
  <button class="symbol-btn" data-latex="â¦‰#?â¦Š">â¦‰â¬šâ¦Š</button>
  <button class="symbol-btn" data-latex="âŒœ#?âŒ">âŒœâ¬šâŒ</button>
  <button class="symbol-btn" data-latex="âŒ#?âŒŸ">âŒâ¬šâŒŸ</button>

  <!-- Single brackets (non-extensible) -->
  <button class="symbol-btn" data-latex="(">(</button>
  <button class="symbol-btn" data-latex=")">)</button>
  <button class="symbol-btn" data-latex="[">[</button>
  <button class="symbol-btn" data-latex="]">]</button>
  <button class="symbol-btn" data-latex="\{">{</button>
  <button class="symbol-btn" data-latex="\}">}</button>

  <!-- Decorations -->
  <button class="symbol-btn" data-latex="\overbrace{#?}">â</button>
  <button class="symbol-btn" data-latex="\underbrace{#?}">âŸ</button>
  <button class="symbol-btn" data-latex="\overline{#?}">xÌ„</button>
  <button class="symbol-btn" data-latex="\underline{#?}">xÌ²</button>
<button class="symbol-btn" data-latex="\overbrace{#?}">â</button>
<button class="symbol-btn" data-latex="\underbrace{#?}">âŸ</button>
<button class="symbol-btn" data-latex="\overline{#?}">xÌ„</button>
<button class="symbol-btn" data-latex="\underline{#?}">xÌ²</button>
<button class="symbol-btn" data-latex="\widehat{#?}">xÌ‚</button>
<button class="symbol-btn" data-latex="\widetilde{#?}">xÌƒ</button>
<button class="symbol-btn" data-latex="\vec{#?}">â†’x</button>
<button class="symbol-btn" data-latex="\bar{#?}">xÌ„</button>
<button class="symbol-btn" data-latex="\hat{#?}">xÌ‚</button>
<button class="symbol-btn" data-latex="\tilde{#?}">xÌƒ</button>
<button class="symbol-btn" data-latex="\dot{#?}">áº‹</button>
<button class="symbol-btn" data-latex="\ddot{#?}">áº</button>
</div>
<div id="palette-calculus" class="symbol-palette hidden">
  <!-- Row 1, Group 1: Basic Integrals -->
  <div class="operator-group">
    <button class="symbol-btn" data-latex="\int_{#@}^{#?}">âˆ«áµƒáµ‡</button>
    <button class="symbol-btn" data-latex="\iint_{#@}^{#?}">âˆ¬áµƒáµ‡</button>
    <button class="symbol-btn" data-latex="\iiint_{#@}^{#?}">âˆ­áµƒáµ‡</button>
    <button class="symbol-btn" data-latex="\iiiint_{#@}^{#?}">â¨Œáµƒáµ‡</button>
  </div>
  
  <!-- Row 1, Group 2: Contour Integrals -->
  <div class="operator-group">
    <button class="symbol-btn" data-latex="\oint_{#@}^{#?}">âˆ®áµƒáµ‡</button>
    <button class="symbol-btn" data-latex="\oiint_{#@}^{#?}">âˆ¯áµƒáµ‡</button>
    <button class="symbol-btn" data-latex="\oiiint_{#@}^{#?}">âˆ°áµƒáµ‡</button>
    <button class="symbol-btn" data-latex="\varointclockwise_{#@}^{#?}">âˆ²áµƒáµ‡</button>
    <button class="symbol-btn" data-latex="\ointctrclockwise_{#@}^{#?}">âˆ³áµƒáµ‡</button>
  </div>
  
  <!-- Row 1, Group 3: Integrals with functions -->
  <div class="operator-group">
    <button class="symbol-btn" data-latex="\int_{#@}^{#?} #? \, d#?">âˆ«â‚áµ‡ f(x)dx</button>
    <button class="symbol-btn" data-latex="\int #? \, d#?">âˆ« f(x)dx</button>
    <button class="symbol-btn" data-latex="\iint #? \, d#?">âˆ¬ f dx</button>
    <button class="symbol-btn" data-latex="\iiint #? \, d#?">âˆ­ f dx</button>
    <button class="symbol-btn" data-latex="\oint #? \, d#?">âˆ® f dx</button>
  </div>
  
  <!-- Row 1, Group 4: Multiple integrals -->
  <div class="operator-group">
    <button class="symbol-btn" data-latex="\int_{#@}^{#?} #? \, d#? \, d#?">âˆ«âˆ« f dx dy</button>
    <button class="symbol-btn" data-latex="\int #? \, d#? \, d#?">âˆ« f dx dy</button>
    <button class="symbol-btn" data-latex="\iint_{#@}^{#?} #? \, d#? \, d#?">âˆ¬ f dx dy</button>
    <button class="symbol-btn" data-latex="\iiint_{#@}^{#?} #? \, d#? \, d#? \, d#?">âˆ­ f dx dy dz</button>
    <button class="symbol-btn" data-latex="\oint_{#@}^{#?} #? \, d#? \, d#?">âˆ® f dx dy</button>
  </div>
  <div class="operator-group">
  <button class="symbol-btn" data-latex="\frac{\partial}{\partial #?}">âˆ‚/âˆ‚x</button>
  <button class="symbol-btn" data-latex="\frac{\partial #@}{\partial #?}">âˆ‚f/âˆ‚x</button>
  <button class="symbol-btn" data-latex="\frac{\partial^2}{\partial #?^2}">âˆ‚Â²/âˆ‚xÂ²</button>
  <button class="symbol-btn" data-latex="\frac{\partial^2 #@}{\partial #?^2}">âˆ‚Â²f/âˆ‚xÂ²</button>
  <button class="symbol-btn" data-latex="\frac{\partial^2 #@}{\partial #? \partial #?}">âˆ‚Â²f/âˆ‚xâˆ‚y</button>
</div>
  
  <!-- Row 2, Group 1: Sums and Products -->
  <div class="operator-group">
    <button class="symbol-btn" data-latex="\sum_{#@}^{#?}">Î£áµƒáµ‡</button>
    <button class="symbol-btn" data-latex="\prod_{#@}^{#?}">âˆáµƒáµ‡</button>
    <button class="symbol-btn" data-latex="\coprod_{#@}^{#?}">âˆáµƒáµ‡</button>
  </div>
  
  <!-- Row 2, Group 2: Big operators -->
  <div class="operator-group">
    <button class="symbol-btn" data-latex="\bigcup_{#@}^{#?}">â‹ƒáµƒáµ‡</button>
    <button class="symbol-btn" data-latex="\bigcap_{#@}^{#?}">â‹‚áµƒáµ‡</button>
    <button class="symbol-btn" data-latex="\bigvee_{#@}^{#?}">â‹áµƒáµ‡</button>
    <button class="symbol-btn" data-latex="\bigwedge_{#@}^{#?}">â‹€áµƒáµ‡</button>
  </div>
  
  <!-- Row 2, Group 3: More big operators -->
  <div class="operator-group">
    <button class="symbol-btn" data-latex="\bigoplus_{#@}^{#?}">â¨áµƒáµ‡</button>
    <button class="symbol-btn" data-latex="\bigotimes_{#@}^{#?}">â¨‚áµƒáµ‡</button>
    <button class="symbol-btn" data-latex="\bigodot_{#@}^{#?}">â¨€áµƒáµ‡</button>
    <button class="symbol-btn" data-latex="\biguplus_{#@}^{#?}">â¨ƒáµƒáµ‡</button>
    <button class="symbol-btn" data-latex="\bigsqcup_{#@}^{#?}">â¨†áµƒáµ‡</button>
    <button class="symbol-btn" data-latex="\bigsqcap_{#@}^{#?}">â¨…áµƒáµ‡</button>
  </div>
  
  <!-- Row 3, Group 1: Basic Limits -->
  <div class="operator-group">
    <button class="symbol-btn" data-latex="\lim">lim</button>
    <button class="symbol-btn" data-latex="\lim_{#?}">lim_</button>
    <button class="symbol-btn" data-latex="\lim_{#? \to #?}">lim â†’</button>
  </div>
  
  <!-- Row 3, Group 2: Limits with infinity -->
  <div class="operator-group">
    <button class="symbol-btn" data-latex="\lim_{#? \to \infty}">lim â†’ âˆ</button>
    <button class="symbol-btn" data-latex="\lim_{#? \to -\infty}">lim â†’ -âˆ</button>
    <button class="symbol-btn" data-latex="\lim_{#? \to 0}">lim â†’ 0</button>
  </div>
  
  <!-- Row 3, Group 3: Limits with x -->
  <div class="operator-group">
    <button class="symbol-btn" data-latex="\lim_{x \to \infty}">lim xâ†’âˆ</button>
    <button class="symbol-btn" data-latex="\lim_{x \to -\infty}">lim xâ†’-âˆ</button>
    <button class="symbol-btn" data-latex="\lim_{x \to 0}">lim xâ†’0</button>
  </div>
  
  <!-- Row 3, Group 4: Lim sup/inf -->
  <div class="operator-group">
    <button class="symbol-btn" data-latex="\limsup_{#?}">lim sup</button>
    <button class="symbol-btn" data-latex="\liminf_{#?}">lim inf</button>
  </div>
  
  <!-- Row 3, Group 5: Sup/Inf/Max/Min -->
  <div class="operator-group">
    <button class="symbol-btn" data-latex="\sup_{#?}">sup</button>
    <button class="symbol-btn" data-latex="\inf_{#?}">inf</button>
    <button class="symbol-btn" data-latex="\max_{#?}">max</button>
    <button class="symbol-btn" data-latex="\min_{#?}">min</button>
  </div>
  
  <!-- Row 4, Group 1: Differential operators -->
  <div class="operator-group">
    <button class="symbol-btn" data-latex="\partial">âˆ‚</button>
    <button class="symbol-btn" data-latex="\nabla">âˆ‡</button>
    <button class="symbol-btn" data-latex="\triangle">â–³</button>
    <button class="symbol-btn" data-latex="\infty">âˆ</button>
  </div>
</div>

<div id="palette-misc" class="symbol-palette hidden">
  <button class="symbol-btn" data-latex="+">+</button>
  <button class="symbol-btn" data-latex="-">âˆ’</button>
  <button class="symbol-btn" data-latex="\pm">Â±</button>
  <button class="symbol-btn" data-latex="\mp">âˆ“</button>
  <button class="symbol-btn" data-latex="\times">Ã—</button>
  <button class="symbol-btn" data-latex="\cdot">Â·</button>
  <button class="symbol-btn" data-latex="\div">Ã·</button>
  <button class="symbol-btn" data-latex="/">/</button>
  <button class="symbol-btn" data-latex="\ast">âˆ—</button>
<button class="symbol-btn" data-latex="\degree">Â°</button>
  <button class="symbol-btn" data-latex="\bullet">â€¢</button>
  <button class="symbol-btn" data-latex="\oplus">âŠ•</button>
  <button class="symbol-btn" data-latex="\ominus">âŠ–</button>
  <button class="symbol-btn" data-latex="\otimes">âŠ—</button>
  <button class="symbol-btn" data-latex="\oslash">âŠ˜</button>
  <button class="symbol-btn" data-latex="\odot">âŠ™</button>
  <button class="symbol-btn" data-latex="\cup">âˆª</button>
  <button class="symbol-btn" data-latex="\cap">âˆ©</button>
  <button class="symbol-btn" data-latex="\in">âˆˆ</button>
  <button class="symbol-btn" data-latex="\notin">âˆ‰</button>
  <button class="symbol-btn" data-latex="\ni">âˆ‹</button>
  <button class="symbol-btn" data-latex="\subset">âŠ‚</button>
  <button class="symbol-btn" data-latex="\supset">âŠƒ</button>
  <button class="symbol-btn" data-latex="\subseteq">âŠ†</button>
  <button class="symbol-btn" data-latex="\supseteq">âŠ‡</button>
  <button class="symbol-btn" data-latex="\emptyset">âˆ…</button>
  <button class="symbol-btn" data-latex="\forall">âˆ€</button>
  <button class="symbol-btn" data-latex="\exists">âˆƒ</button>
  <button class="symbol-btn" data-latex="\nexists">âˆ„</button>
  <button class="symbol-btn" data-latex="\neg">Â¬</button>
  <button class="symbol-btn" data-latex="\wedge">âˆ§</button>
  <button class="symbol-btn" data-latex="\vee">âˆ¨</button>
  <button class="symbol-btn" data-latex="\angle">âˆ </button>
<button class="symbol-btn" data-latex="\degree">Â°</button>
  <button class="symbol-btn" data-latex="\triangle">â–³</button>
  <button class="symbol-btn" data-latex="\nabla">âˆ‡</button>
  <button class="symbol-btn" data-latex="\Diamond">â—Š</button>
  <button class="symbol-btn" data-latex="\square">â–¡</button>
  <button class="symbol-btn" data-latex="\%">%</button>
  <button class="symbol-btn" data-latex="!">!</button>
  <button class="symbol-btn" data-latex="\cdots">â‹¯</button>
  <button class="symbol-btn" data-latex="\vdots">â‹®</button>
  <button class="symbol-btn" data-latex="\ddots">â‹±</button>
  <button class="symbol-btn" data-latex="\ldots">â€¦</button>
  <button class="symbol-btn" data-latex="\aleph">â„µ</button>
  <button class="symbol-btn" data-latex="\hbar">â„</button>
  <button class="symbol-btn" data-latex="\ell">â„“</button>
  <button class="symbol-btn" data-latex="\wp">â„˜</button>
  <button class="symbol-btn" data-latex="\Re">â„œ</button>
  <button class="symbol-btn" data-latex="\Im">â„‘</button>
  <button class="symbol-btn" data-latex="\top">âŠ¤</button>
  <button class="symbol-btn" data-latex="\bot">âŠ¥</button>
  <button class="symbol-btn" data-latex="\vdash">âŠ¢</button>
  <button class="symbol-btn" data-latex="\models">âŠ¨</button>

  <button class="symbol-btn" data-latex="\nparallel">âˆ¦</button>
  <button class="symbol-btn" data-latex="â««">â««</button>
  <button class="symbol-btn" data-latex="^\circ\text{C}">â„ƒ</button>
  <button class="symbol-btn" data-latex="\iddots">â‹°</button>
  <button class="symbol-btn" data-latex="\text{â€°}">â€°</button>
</div>

<div class="content">
  <!-- MathLive Input Field -->
  <math-field
    id="mathlive-editor"
    virtual-keyboard-mode="manual"
    smart-fence="true"
    keypress-sound="none"
  ></math-field>

</div>

<div class="footer">
  <button class="btn btn-cancel" onclick="cancelDialog()">Cancel</button>
  <button class="btn btn-save" onclick="saveFormula()">Save</button>
</div>



</body>
</html>